<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   <!-- Bootstrap -->
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">

    <link href="./src/Styles.css" rel="stylesheet">

    <title>Home Page</title>
</head>

<body>
    <div id = "camcontrols">
        <div id = "webcam">
            <video id = "webcamreal" width=640 height=480 autoplay>
                <source src="http://127.0.0.1" type="video/ogg">
                Your browser does not support the video tag
            </video>-->
        </div>
        <div id = "allcontrols">
            <div id = "controls">
                <div id = "topbuttons">
                    <button class="button" id="recognition">
                        Recognition
                    </button>
                    <button class="button" id="shoot">
                        Shoot
                    </button>
                </div>
                <button class="button" id="stop">
                    Stop
                </button>
                
            </div>
            <div>
                <div id="moretopbuttons">
                    <button class="button arrowbutton" id="up">
                        <img src="./src/Assets/up.png" class="arrow">
                    </button>
                    <button class="button arrowbutton" id="down">
                        <img src="./src/Assets/down.png" class="arrow">
                    </button>
                </div>
                
                <div id = "morebottombuttons">
                    <button class="button arrowbutton" id="left">
                        <img src="./src/Assets/left.png" class="arrow">
                    </button>
                    <button class="button arrowbutton" id="right">
                        <img src="./src/Assets/right.png" class="arrow">
                    </button>
                </div>
                
            </div>
        </div>
        
    </div>
    <div id = "output">
        <textarea>
            
        </textarea>
    </div>

    <!--<script>
        let video = document.querySelector("#videoelement");
    
        if (navigator.mediaDevices.getUserMedia)
        {
            navigator.mediaDevices.getUserMedia({video: true})
                .then (function (stream){
                    video.srcObject = stream;
                })
                .catch (function (error){
                    console.log("Something went wrong!");
                })
        }
        else {
            console.log("getUserMedia not supported!");
        }
    </script>-->
      <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
      <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
      <!-- Include all compiled plugins (below), or include individual files as needed -->
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
      <script
      src="https://code.jquery.com/jquery-1.12.4.min.js"
      integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ"
      crossorigin="anonymous"
    ></script>
    <!-- Bootstrap JavaScript -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js"
      integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd"
      crossorigin="anonymous"
    ></script>
    <script>
      // Function to send a POST request to the server with the given angle
      function sendServoCommand(direction) {
        fetch("/control", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ angle: direction })
        })
          .then(response => response.text())
          .then(data => {
            console.log(data);
            document.getElementById("output").value += data + "\n";
          })
          .catch(error => console.error("Error:", error));
      }

      // Attach event listeners to the arrow buttons
      // Adjust angle values based on your servo configuration
      document.getElementById("up").addEventListener("click", () => {
        sendServoCommand(45);
      });
      document.getElementById("down").addEventListener("click", () => {
        sendServoCommand(45);
      });
      document.getElementById("left").addEventListener("click", () => {
        sendServoCommand(135);
      });
      document.getElementById("right").addEventListener("click", () => {
        sendServoCommand(0);
      });

      // Additional actions for other buttons can be added here
      document.getElementById("recognition").addEventListener("click", () => {
        console.log("Recognition button clicked");
        // Add recognition functionality here
      });
      document.getElementById("shoot").addEventListener("click", () => {
        console.log("Shoot button clicked");
        // Add shooting functionality here
      });
      document.getElementById("stop").addEventListener("click", () => {
        console.log("Stop button clicked");
        // You might send a special command or simply halt any ongoing action
        sendServoCommand(-1); // For example, using -1 as a stop command
      });
    </script>
    <script src="./src/script.js"></script>
</body>
</html>